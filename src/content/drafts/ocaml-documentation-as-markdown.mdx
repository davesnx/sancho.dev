---
title: "OCaml documentation as markdown"
publishedAt: "2025-01-13"
isDraft: true
tags:
  - "OCaml"
  - "odoc"
  - "Documentation"
---

---

---
title: "odoc supports markdown backend"
publishedAt: "2025-10-12"
isDraft: true
tags:
  - "OCaml"
  - "odoc"
  - "documentation"
---

What is odoc?

Briefly, odoc is a documentation generator and rendering tool. It can read doc comments from source files and transform them into formats such as HTML, LaTeX, or manual (‘man’) pages (as of 3.1, odoc also supports an experimental markdown backend). Furthermore, it enables cross-referencing, based on an extended version of ocamldoc markup, allowing you to create links for functions, types, modules, and documentation pages. Documentation generated by odoc can include links to the source code of functions, making navigating between the documentation and the code easier for the reader. The tool also automatically highlights syntax in code snippets to make documentation more legible.

You can learn more about odoc on its website and on its OCaml.org page.

At Melange, we use [odoc](https://github.com/ocaml/odoc) to generate API references for our libraries Belt, Js, Stdlib, and others.

The rest of our documentation lives in [VitePress](https://vitepress.dev/), a static site generator that works with Markdown files and gives us all the modern features you'd expect: fast search, smooth navigation, a single-page app experience.

This setup works, but it creates a hard boundary between the two documentation systems:

- **No cross-referencing**: Can't link from VitePress articles to odoc modules in a meaningful way
- **Fragmented search**: VitePress search doesn't index the odoc-generated HTML
- **Jarring experience**: Users go from a smooth SPA to a multi-page HTML site mid-read
- **Inconsistent navigation**: Different headers, sidebars, and styles
- **Duplication**: Tracking scripts, favicons, syntax highlighting—everything needs separate configuration

The problem isn't unique to Melange. Every OCaml project using modern documentation tools may faces this split: API docs in one world, guides and tutorials in another.

## The rabbit hole: why markdown matters

When I started looking into solutions, I realized this goes deeper than just "unifying docs."

Markdown has become the universal language of documentation. GitHub renders it. GitLab renders it. Every static site generator speaks it fluently. And increasingly, Large Language Models need it.

LLMs are trained on structured, human-readable text. Markdown's simple syntax makes it perfect for this—it's machine-parseable yet stays readable. When your API documentation is HTML-only, it's harder to index, harder to search, and harder for AI tools to understand.

For OCaml, this matters. If we want our documentation to be accessible to modern tools—from static site generators to AI assistants—we need Markdown output from odoc.

## The journey: previous attempts

This isn't a new idea. The OCaml community has been thinking about it for years.

Back in 2018, [issue #121](https://github.com/ocaml/odoc/issues/121) was opened on odoc's repository, requesting Markdown support. The use case was clear: better integration with tools like Docusaurus and GitHub's own rendering.

In 2021, someone submitted [PR #791](https://github.com/ocaml/odoc/pull/791)—a serious attempt at building a Markdown generator. It showed promise but didn't merge. The technical challenges of mapping odoc's rich internal representation to Markdown while preserving cross-references and structure proved complex.

[mbarbin's Docusaurus experiment](https://mbarbin.github.io/doc-experiment-docusaurus/) demonstrated what was possible: a proof-of-concept showing odoc content integrated into a modern documentation site. It looked great, but required workarounds.

Then, in early 2025, the conversation reignited on [OCaml Discuss](https://discuss.ocaml.org/t/2025-documentation-best-practices/17008/14). Fresh momentum, fresh ideas, and renewed commitment from maintainers.

Standing on the shoulders of these efforts, the feature finally landed.

## The solution: using the markdown backend

The markdown backend is now available in odoc. Here's how to use it.

**Requirements**: You'll need odoc 2.5.0 or later, which includes the markdown renderer.

**Building markdown docs**: If you're using Dune (and you probably are), it's as simple as:

```bash
dune build @doc-markdown
```

This generates Markdown files alongside your usual HTML documentation. The structure mirrors your module hierarchy, with each module getting its own `.md` file.

**Example output**: Here's a snippet of what odoc generates from a simple OCaml module:

```markdown
# Module `Belt.Array`

Functions for array manipulation.

## val length : 'a array -> int

Return the length (number of elements) of the given array.

## val get : 'a array -> int -> 'a

`get a n` returns the element number `n` of array `a`.

Raises `Invalid_argument` if `n` is outside the range 0 to `(length a - 1)`.
```

Clean, readable, and ready to integrate into any Markdown-based system.

**Real-world example**: We're already using this in Melange. You can see the results in our [documentation site](https://melange.re/), where API references now live alongside guides and tutorials in a unified experience.

## The payoff: what this enables

This isn't just about prettier docs. It unlocks capabilities that weren't possible before.

**Unified documentation sites**: Your entire documentation—tutorials, guides, and API references—can now live in a single static site generator. One navigation system, one search index, one experience.

**Platform flexibility**: Want your API docs on GitHub? Done. GitLab? Sure. Any platform that renders Markdown becomes a potential home for your documentation.

**Better LLM context**: As AI tools become more integrated into development workflows, having your API documentation in a structured, parseable format means better code completion, better documentation search, and better AI-assisted development.

**Modern SSG features**: Static site generators like Docusaurus, VitePress, and MkDocs come with powerful features—full-text search, versioning, internationalization, dark mode, responsive design. Now you can use all of them with your OCaml API docs.

For Melange specifically, this means we can finally have the documentation site we've wanted: fast, searchable, beautiful, and consistent from the first page to the last function signature.

## Try it and build

The markdown backend is ready. If you maintain an OCaml library, this is your chance to modernize your documentation.

Try it out. Run `dune build @doc-markdown` on your project. See what it generates. Integrate it with your favorite static site generator.

Report issues you find. The feature is new, and real-world usage will surface edge cases and opportunities for improvement.

Build awesome documentation sites. Show the OCaml community what's possible when API docs and human-written guides live together seamlessly.

## Resources

If you want to dive deeper or follow the history:

- [OCaml Discuss: 2025 Documentation Best Practices](https://discuss.ocaml.org/t/2025-documentation-best-practices/17008/14) - The recent discussion that brought new momentum
- [odoc Issue #121](https://github.com/ocaml/odoc/issues/121) - The original feature request from 2018
- [odoc PR #791](https://github.com/ocaml/odoc/pull/791) - The 2021 attempt at implementing markdown support
- [mbarbin's Docusaurus Experiment](https://mbarbin.github.io/doc-experiment-docusaurus/) - Proof-of-concept integration
- [Melange Documentation](https://melange.re/) - A real-world example of the unified documentation approach

The OCaml documentation ecosystem just got a lot more flexible. Time to put it to use.

---

PROMPT

Let's create a blog post togheter.

## Step 1: analyze and gather information, and create the structure

- Explain the need/the story behind all of these
    - extract facts/information about the markdown backend for odoc from these link: https://discuss.ocaml.org/t/2025-documentation-best-practices/17008/14
    - It has tried before (2021): https://github.com/ocaml/odoc/pull/791
    - Explain crucial role from markdown in LLMs
    - Extract info about previous experiments:https://mbarbin.github.io/doc-experiment-docusaurus/
    - Extract information about https://github.com/ocaml/odoc/issues/121
    - My description from the PR:
```
Why
We use odoc in Melange's documentation, to generate API references for Melange libraries, such as Belt, Js, and Stdlib. While the rest of the documentation is handled by vitepress a static site generator working with Markdown files, with a lot of interesting features.

This works reasonably well, but creates a big barrier between the documentation sites:

Can't reference the melange.re docs articles from inside mld
Search from melange.re docs don't find anything inside the generated HTML
Users go from a unified experience to a different experience, melange.re is a SPA while generated HTML is an MPA
Navigation on the header and sidebar isn't the same and can't be unified
and a few more small details, such as favicon, tracking scripts, same syntax highlight and all features that a static site generator may give
For this reason, I wanted to generate markdown from odoc and (in the melange case) have another process that manipulates those markdown files to expand the documentation.

Another big use case for Markdown generation is Github, or any markdown renderer platform really.
```

- Explain the funtionality via dune (dune build @doc-markdown)
- Show an example

## Step 2: Organise structure and start drawing the storytelling

## Step 3: Polish the blog post with formal links, quotes, images and final touches.

